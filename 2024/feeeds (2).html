
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootswatch@5.2.3/dist/slate/bootstrap.min.css">
</head>
  <style>
    body {
      background-color: #111827!important;
      color: #808080;
      margin: 0;
      padding: 0;
    }
    body {
  min-height: 100vh;
  display: grid;
  place-items: center;
  font-family: "SF Pro Text", "SF Pro Icons", "AOS Icons", "Helvetica Neue", Helvetica, Arial, sans-serif, system-ui;
  background: hsl(0 0% 0%);
  gap: 2rem;
}

body::before {
	--line: hsl(0 0% 95% / 0.25);
	content: "";
	height: 100vh;
	width: 100vw;
	position: fixed;
	background:
		linear-gradient(90deg, var(--line) 1px, transparent 1px 10vmin) 0 -5vmin / 10vmin 10vmin,
		linear-gradient(var(--line) 1px, transparent 1px 10vmin) 0 -5vmin / 10vmin 10vmin;
	mask: linear-gradient(-15deg, transparent 30%, white);
	top: 0;
	z-index: -1;
}
  </style>
<body>
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-4">
        <div class="py-4">
          <h2 style="color:orange">Land Surveyors United Posts</h2>
          <div id="feedList">
            <!-- Feeds will be populated dynamically -->
          </div>
        </div>
      </div>
      <div class="col-md-8">
        <div class="py-4">
          <h2 style="color:orange">Latest Posts</h2>
          <div id="postList">
            <!-- Posts will be populated dynamically -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
  <script>
    // Function to fetch and display feeds
    function fetchFeeds() {
      fetch("https://landsurveyorsuniteddocs.on.drv.tw/membertools/opml/jobsmarket.opml")
        .then(response => response.text())
        .then(data => {
          // Parse the OPML file content
          const parser = new DOMParser();
          const xmlDoc = parser.parseFromString(data, "text/xml");

          // Get all outline elements (feeds)
          const outlines = xmlDoc.querySelectorAll("outline");

          // Create HTML for feed list
          let feedListHTML = "";
          outlines.forEach(outline => {
            const title = outline.getAttribute("text");
            const xmlUrl = outline.getAttribute("xmlUrl");
            feedListHTML += `<div class="mb-3">
                                <button class="btn btn-primary" onclick="fetchPosts('${xmlUrl}')">${title}</button>
                              </div>`;
          });

          // Display feed list
          document.getElementById("feedList").innerHTML = feedListHTML;
        })
        .catch(error => console.log(error));
    }

    // Function to fetch and display posts
    function fetchPosts(feedUrl) {
      fetch(`https://api.rss2json.com/v1/api.json?rss_url=${feedUrl}`)
        .then(response => response.json())
        .then(data => {
          // Get the latest posts
          const posts = data.items;

          // Create HTML for post list
          let postListHTML = "";
          posts.forEach(post => {
            const title = post.title;
            const pubDate = new Date(post.pubDate).toLocaleDateString();
            const link = post.link;
            const description = post.description;
            const imageUrl = post.enclosure ? post.enclosure.link : '';

            postListHTML += `<div class="card mb-3">
                                <img src="${imageUrl}" class="card-img-top" alt="${title}">
                                <div class="card-body">
                                  <h5 class="card-title">${title}</h5>
                                  <p class="card-text">${description}</p>
                                  <p class="card-text"><small class="text-muted">Published on ${pubDate}</small></p>
                                  <a href="${link}" class="btn btn-primary">Read More</a>
                                </div>
                              </div>`;
          });

          // Display post list
          document.getElementById("postList").innerHTML = postListHTML;
        })
        .catch(error => console.log(error));
    }

    // Fetch feeds on page load
    fetchFeeds();
  </script>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-28999098-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-28999098-1');
</script>
</body>
</html>